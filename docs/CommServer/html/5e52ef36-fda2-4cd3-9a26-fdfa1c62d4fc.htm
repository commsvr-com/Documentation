<html><head><meta http-equiv="X-UA-Compatible" content="IE=edge" /><link rel="shortcut icon" href="../icons/favicon.ico" /><link rel="stylesheet" type="text/css" href="../styles/branding.css" /><link rel="stylesheet" type="text/css" href="../styles/branding-en-US.css" /><script type="text/javascript" src="../scripts/branding.js"> </script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Adaptive sampling algorithm</title><meta name="Language" content="en-us" /><meta name="Microsoft.Help.Id" content="5e52ef36-fda2-4cd3-9a26-fdfa1c62d4fc" /><meta name="Description" content="According to the OPC specification, the scanner module is responsible for keeping the cached data fresh, but it is worth stressing that “freshness” of the data depends on the process state and can change in time drastically." /><meta name="Microsoft.Help.ContentType" content="Concepts" /><meta name="BrandingAware" content="true" /><link rel="stylesheet" type="text/css" href="../styles/branding-Website.css" /><script type="text/javascript" src="../scripts/jquery-3.3.1.min.js"></script><script type="text/javascript" src="../scripts/branding-Website.js"></script><script type="text/javascript" src="../scripts/clipboard.min.js"></script></head><body onload="OnLoad('cs')"><input type="hidden" id="userDataCache" class="userDataStyle" /><div class="pageHeader" id="PageHeader">CommServer<form id="SearchForm" method="get" action="#" onsubmit="javascript:TransferToSearchPage(); return false;"><input id="SearchTextBox" type="text" maxlength="200" /><button id="SearchButton" type="submit"></button></form></div><div class="pageBody"><div class="leftNav" id="leftNav"><div id="tocNav"><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/2dea0752-d490-47e6-8444-ac73e07601fc.htm" title="CommServer" tocid="roottoc">CommServer</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/2dea0752-d490-47e6-8444-ac73e07601fc.htm" title="CommServer" tocid="2dea0752-d490-47e6-8444-ac73e07601fc">CommServer</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/a709e1f0-0b6e-42da-8e6d-4a3590ada4c6.htm" title="Theory of operation" tocid="a709e1f0-0b6e-42da-8e6d-4a3590ada4c6">Theory of operation</a></div><div class="toclevel1" data-toclevel="1" data-childrenloaded="true"><a class="tocExpanded" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/432a42dd-56d3-40e1-ba4a-a97ac8392f72.htm" title="Optimization of communication paths utilization" tocid="432a42dd-56d3-40e1-ba4a-a97ac8392f72">Optimization of communication paths utilization</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/9a49ee2f-9ab6-4ab2-b918-63cffedf8e3f.htm" title="Optimal transfer algorithm" tocid="9a49ee2f-9ab6-4ab2-b918-63cffedf8e3f">Optimal transfer algorithm</a></div><div class="toclevel2 current" data-toclevel="2"><a data-tochassubtree="false" href="../html/5e52ef36-fda2-4cd3-9a26-fdfa1c62d4fc.htm" title="Adaptive sampling algorithm" tocid="5e52ef36-fda2-4cd3-9a26-fdfa1c62d4fc">Adaptive sampling algorithm</a></div></div><div id="tocResizableEW" onmousedown="OnMouseDown(event);"></div><div id="TocResize" class="tocResize"><img id="ResizeImageIncrease" src="../icons/TocOpen.gif" onclick="OnIncreaseToc()" alt="Click or drag to resize" title="Click or drag to resize" /><img id="ResizeImageReset" src="../icons/TocClose.gif" style="display:none" onclick="OnResetToc()" alt="Click or drag to resize" title="Click or drag to resize" /></div></div><div class="topicContent" id="TopicContent"><table class="titleTable"><tr><td class="titleColumn"><h1>Adaptive sampling algorithm</h1></td></tr></table><span class="introStyle"><A href="http://www.commsvr.com/Products/OPC/CommServer.aspx" title="CommServer online help" target="_blank">Home</A></span> <div class="collapsibleAreaRegion" id="AdaptiveSamplingAlgorithm"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID0RB')" onkeypress="SectionExpandCollapse_CheckKey('ID0RB', event)" tabindex="0"><img id="ID0RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Adaptive sampling algorithm</span></div><div id="ID0RBSection" class="collapsibleSection"><p>According to the OPC specification, the scanner module is responsible for keeping the cached data fresh, but it is worth stressing that “freshness” of the data depends on the process state and can change in time drastically. The communication server (in order to optimize the data transfer costs) should adapt the sampling rate to current process control needs. To achieve this, CommServer uses an algorithm called <strong><em>adaptive sampling algorithm</em></strong> (ASA).</p><p>To illustrate that the meaning of the data “freshness” is not obvious, let's analyze the needs of a remote process control of a heat chamber – a node in the heat distribution network, as an example.  It works like a kitchen tap – generally is opened or closed - controlling the flow of water. But there are some differences, actually dimension of the pipe is typically 900mm and water flow (about 6000t/h) is controlled by at least 4 valves equipped with actuators working synchronously in a sequence. In this application their states have to be monitored and controlled remotely (up to 20km). The chamber can be in one of the four available states:</p><ul><li><p>Closed</p></li><li><p>Opening</p></li><li><p>Opened</p></li><li><p>Closing</p></li></ul><p>The state sequence is illustrated in the figure (Fig. 1).</p><div class="mediaCenter"><img alt="Diagram of valve states" src="../media/Adaptive_Sampling_algorithm_valve_states.jpg" /><div class="caption"><span class="captionLead">Figure 1:
						</span>Diagram of valve states</div></div><p>Typically, the chamber is opened or closed – it means that these states last for a long time - days or even months. Because these states are pretty stable and cannot be disturbed, the time between snapshots (raw data) of the process can be measured in hours. We must face other requirements when any of the valves is in a transient position: opening or closing.  It usually lasts for a few minutes only and can be recognized as a special or alarm state. In this case, the movement raw data sampling rate should guarantee a delay less than a few seconds to allow a safe remote control of the valves. In the worse case approach we would have to transfer a lot of useless data most of the time. </p><p>To address this problem, the sampling scheduling mechanism built in the CommServer communication engine adapts continuously the scanning policy according to the controlled real time process state (Fig. 2). According to the real time process state the raw process data sampling rate is adjusted.</p><div class="alert"><table><tr><th><img src="../icons/AlertNote.png" alt="Note" /> Note</th></tr><tr><td><p><strong><em>Adaptive sampling algorithm</em></strong> preserves communication paths bandwidth and costs.</p></td></tr></table></div><div class="mediaCenter"><img alt="Adaptive  sampling algorithm" src="../media/Adaptive_Sampling_algorithm.jpg" /><div class="caption"><span class="captionLead">Figure 2:
						</span>Adaptive  sampling algorithm</div></div></div></div></div><div id="pageFooter" class="pageFooter">This documentation is designed to be used with CAS CommServer (this software is available at <A href="http://www.commsvr.com/DownloadCenter/ProductSoftware/PR2105CommServer_Software.aspx" title="CommServer -multiprotocol, multichannel, redundant communication server – software installation.">http://www.commsvr.com</A>).<p><a href="http://www.commsvr.com/" target="_blank">Copyright © 2008-2020, CAS, All rights reserved</a></p><div class="feedbackLink">Send comments on this topic to
        <a id="HT_MailLink" href="mailto:techsupp%40cas.eu?Subject=CommServer">CommServer Team</a></div>
        <script type="text/javascript">
        var HT_mailLink = document.getElementById("HT_MailLink");
        var HT_mailLinkText = HT_mailLink.innerHTML;
        HT_mailLink.href += ": " + document.title + "\u0026body=" + encodeURIComponent("Your feedback is used to improve the documentation and the product. Your e-mail address will not be used for any other purpose and is disposed of after the issue you report is resolved. While working to resolve the issue that you report, you may be contacted via e-mail to get further details or clarification on the feedback you sent. After the issue you report has been addressed, you may receive an e-mail to let you know that your feedback has been addressed.");
        HT_mailLink.innerHTML = HT_mailLinkText;
        </script></div></body></html>