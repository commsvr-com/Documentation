<html><head><meta http-equiv="X-UA-Compatible" content="IE=edge" /><link rel="shortcut icon" href="../icons/favicon.ico" /><link rel="stylesheet" type="text/css" href="../styles/branding.css" /><link rel="stylesheet" type="text/css" href="../styles/branding-en-US.css" /><script type="text/javascript" src="../scripts/branding.js"> </script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>CommServer configuration example</title><meta name="Language" content="en-us" /><meta name="Microsoft.Help.Id" content="1c7b5f72-c925-4500-89a2-80344030eedc" /><meta name="Description" content="CommServer stores its configuration in an “.xml” file that contains information about channels, protocols, stations and data. The demo configuration shipped with CommServer is stored in the CommServer installation directory in the “DefaultConfig.xml” file." /><meta name="Microsoft.Help.ContentType" content="Concepts" /><meta name="BrandingAware" content="true" /><link rel="stylesheet" type="text/css" href="../styles/branding-Website.css" /><script type="text/javascript" src="../scripts/jquery-3.3.1.min.js"></script><script type="text/javascript" src="../scripts/branding-Website.js"></script><script type="text/javascript" src="../scripts/clipboard.min.js"></script></head><body onload="OnLoad('cs')"><input type="hidden" id="userDataCache" class="userDataStyle" /><div class="pageHeader" id="PageHeader">CommServer<form id="SearchForm" method="get" action="#" onsubmit="javascript:TransferToSearchPage(); return false;"><input id="SearchTextBox" type="text" maxlength="200" /><button id="SearchButton" type="submit"></button></form></div><div class="pageBody"><div class="leftNav" id="leftNav"><div id="tocNav"><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/2dea0752-d490-47e6-8444-ac73e07601fc.htm" title="CommServer" tocid="roottoc">CommServer</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/2dea0752-d490-47e6-8444-ac73e07601fc.htm" title="CommServer" tocid="2dea0752-d490-47e6-8444-ac73e07601fc">CommServer</a></div><div class="toclevel1" data-toclevel="1" data-childrenloaded="true"><a class="tocExpanded" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/7cebc829-1948-47d6-b093-c1c181d2de7b.htm" title="Examples and tutorials" tocid="7cebc829-1948-47d6-b093-c1c181d2de7b">Examples and tutorials</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/efdd4d99-ff98-46d8-a37a-33de8f522c1d.htm" title="DCOM configuration example" tocid="efdd4d99-ff98-46d8-a37a-33de8f522c1d">DCOM configuration example</a></div><div class="toclevel2 current" data-toclevel="2"><a data-tochassubtree="false" href="../html/1c7b5f72-c925-4500-89a2-80344030eedc.htm" title="CommServer configuration example" tocid="1c7b5f72-c925-4500-89a2-80344030eedc">CommServer configuration example</a></div><div class="toclevel2" data-toclevel="2"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/317fcba8-65a2-4039-b87c-21d69b0a725b.htm" title="CommServer on x64 systems" tocid="317fcba8-65a2-4039-b87c-21d69b0a725b">CommServer on x64 systems</a></div></div><div id="tocResizableEW" onmousedown="OnMouseDown(event);"></div><div id="TocResize" class="tocResize"><img id="ResizeImageIncrease" src="../icons/TocOpen.gif" onclick="OnIncreaseToc()" alt="Click or drag to resize" title="Click or drag to resize" /><img id="ResizeImageReset" src="../icons/TocClose.gif" style="display:none" onclick="OnResetToc()" alt="Click or drag to resize" title="Click or drag to resize" /></div></div><div class="topicContent" id="TopicContent"><table class="titleTable"><tr><td class="titleColumn"><h1>CommServer configuration example</h1></td></tr></table><span class="introStyle"><A href="http://www.commsvr.com/tabid/55/language/en-US/Default.aspx" title="CommServer online help" target="_blank">Home</A></span> <div class="collapsibleAreaRegion" id="CSConfigurationExample"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID0RB')" onkeypress="SectionExpandCollapse_CheckKey('ID0RB', event)" tabindex="0"><img id="ID0RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />CommServer configuration example</span></div><div id="ID0RBSection" class="collapsibleSection"><p>CommServer stores its configuration in an “.xml” file that contains information about channels, protocols, stations and data.  The demo configuration shipped with CommServer is stored in the CommServer installation directory in the “DefaultConfig.xml” file.</p><div class="mediaCenter"><img alt="CommServer demo configuration" src="../media/Cmsvr_r01a.jpg" /><div class="caption"><span class="captionLead">Figure 1:
						</span>CommServer demo configuration</div></div><p>In this demo configuration, CommServer is responsible for reading data from one remote unit – called a station in CommServer terminology. This station and a protocol that is used to access the station are simulated by the DataProvider:  DP.DemoSimulator – a CommServer plugin (separately distributed component) responsible for provision of real time process data.  The station can be accessed via two communication routs:</p><ul><li><p>Directly connected radio – standard serial communication is used and the station address is 0. The simulated error rate is around 5%</p></li><li><p>Radio connected via a leased line – it is necessary to use a port server that is available on IP 192.168.0.1 and TCP port number 2101, the station address is 0. Let's assume that the cost of this route is three times greater than that of the first one. The simulated error rate is around 1%</p></li></ul><p>The communication diagram is presented in the picture below:</p><div class="mediaCenter"><img alt="The communication diagram" src="../media/Cmsvr_r02a.jpg" /><div class="caption"><span class="captionLead">Figure 2:
						</span>The communication diagram</div></div><p>The system requires that the following data must be gathered:</p><ul><li><p>Registers from address 100 to 110 that contain static values (floating point or integers). It is possible to write to those registers. It is required to gather those data every 1 second</p></li><li><p>Flags from address 100 to 109 that contain static binary values. It is possible to write to those flags. It is required to gather those data every 1 second</p></li><li><p>Read only registers from address 10000 to 10002 that contain random generated values. It is required to gather those data every 5 second</p></li></ul><p>Take a look at the CommServer configuration in NetworkConfig:</p><div class="mediaCenter"><img alt="CommServer configuration in NetworkConfig" src="../media/Cmsvr_r03.jpg" /><div class="caption"><span class="captionLead">Figure 3:
						</span>CommServer configuration in NetworkConfig</div></div><p>The following elements can be found:</p><ol><li><p>Channel – there is one configured channel  named Channel0</p></li><li><p>Two protocols: DP.Demo – that is a simulator of the protocol and the remote device. The first protocol has ErrorFrequency parameter set to 20 (every 20th packet is lost, it is 5%). The other protocol has ErrorFrequency set to 100.</p></li><li><p>Two segments - the value of the segment address parameter is important in the second segment that is set to 192.168.0.1:2101 (CommServer should send a data stream to the IP address 192.168.0.1 and port number 2101, the TCP or UDP protocols can be set as a parameter in the production environment using a real DataProvider).</p></li><li><p>Port definition – this is quite an important part of the configuration; comparison of those two definitions is shown in the picture below:</p><div class="mediaCenter"><img alt="Comparison of those two definitions" src="../media/Cmsvr_r04.jpg" /><div class="caption"><span class="captionLead">Figure 4:
						</span>Comparison of those two definitions</div></div><p>Address is the same in both cases, same as station number (0).  Inactive time – this time defines period of time for each interface in which the interface is in the inactive mode. After expiration, this interface switches off the active interface and changes its state to activate itself to check if it is still available. The switched off interface will preempt the communication after expiration of its InactTime. This solution guarantees that only one interface for the selected station is active at any instant and keeps this state as long as another interface becomes active. If there is only one interface it becomes active forever and no additional action is taken. The bigger value of this time, the more rarely this port (interface) is used, so this value should be greater for the more expensive route. The meaning of InactiveTimeAfterFailure parameter is exactly the same as InactTime, except it is used for scheduling after a communication failure occurs on this port. It is usually greater than inactive time (we do not want to try a broken connection). In this demo configuration this time is very short because all communication errors are simulated, connection is never broken, so we do not want to waste time.</p></li><li><p>Station definition – here you can find information about what data and how often should be read. The same station is linked to both ports:</p><div class="mediaCenter"><img alt="Station definition" src="../media/Cmsvr_r05.jpg" /><div class="caption"><span class="captionLead">Figure 5:
						</span>Station definition</div></div><p>Here we have two groups defined. The first one is pooled every 1s (timeout 5s), the other one is pooled every 5s (timeout 50s). The first group contains two data blocks: writable registers from address 100 to 110 and writable flags from address 100 to 109. The second group contains one data block of read only registers from address 10000 to 10002.</p></li></ol><p>This sample configuration, which is delivered with CommServer software family.</p></div></div></div><div id="pageFooter" class="pageFooter">This documentation is designed to be used with CAS CommServer (this software is available at <A href="http://www.commsvr.com/index.php/products" title="CommServer -multiprotocol, multichannel, redundant communication server – software installation.">http://www.commsvr.com</A>).<p><a href="http://www.commsvr.com/" target="_blank">Copyright (c) 2019 Mariusz Postol</a></p><div class="feedbackLink">Send comments on this topic to
        <a id="HT_MailLink" href="mailto:techsupp%40cas.eu?Subject=CommServer">CAS</a></div>
        <script type="text/javascript">
        var HT_mailLink = document.getElementById("HT_MailLink");
        var HT_mailLinkText = HT_mailLink.innerHTML;
        HT_mailLink.href += ": " + document.title + "\u0026body=" + encodeURIComponent("Your feedback is used to improve the documentation and the product. Your e-mail address will not be used for any other purpose and is disposed of after the issue you report is resolved. While working to resolve the issue that you report, you may be contacted via e-mail to get further details or clarification on the feedback you sent. After the issue you report has been addressed, you may receive an e-mail to let you know that your feedback has been addressed.");
        HT_mailLink.innerHTML = HT_mailLinkText;
        </script></div></body></html>