<html><head><meta http-equiv="X-UA-Compatible" content="IE=edge" /><link rel="shortcut icon" href="../icons/favicon.ico" /><link rel="stylesheet" type="text/css" href="../styles/branding.css" /><link rel="stylesheet" type="text/css" href="../styles/branding-en-US.css" /><script type="text/javascript" src="../scripts/branding.js"> </script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Buffered Queues Interface</title><meta name="Language" content="en-us" /><meta name="Microsoft.Help.Id" content="ffd0271b-d16b-45d2-b3b4-264ee4554607" /><meta name="Description" content="Access to the data queues in DataPorter provides buffering of values that are read from OPC Server. This assures that none of the values are lost during the reading process." /><meta name="Microsoft.Help.ContentType" content="Concepts" /><meta name="BrandingAware" content="true" /><link rel="stylesheet" type="text/css" href="../styles/branding-Website.css" /><script type="text/javascript" src="../scripts/jquery-3.3.1.min.js"></script><script type="text/javascript" src="../scripts/branding-Website.js"></script><script type="text/javascript" src="../scripts/clipboard.min.js"></script></head><body onload="OnLoad('cs')"><input type="hidden" id="userDataCache" class="userDataStyle" /><div class="pageHeader" id="PageHeader">CommServer<form id="SearchForm" method="get" action="#" onsubmit="javascript:TransferToSearchPage(); return false;"><input id="SearchTextBox" type="text" maxlength="200" /><button id="SearchButton" type="submit"></button></form></div><div class="pageBody"><div class="leftNav" id="leftNav"><div id="tocNav"><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/2dea0752-d490-47e6-8444-ac73e07601fc.htm" title="CommServer" tocid="roottoc">CommServer</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/b8c5f048-bb7e-4742-b7f2-b61a77789ed9.htm" title="DataPorter" tocid="b8c5f048-bb7e-4742-b7f2-b61a77789ed9">DataPorter</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/a5b37bb1-ca47-4770-900e-85b8da61cfe6.htm" title="Configuration" tocid="a5b37bb1-ca47-4770-900e-85b8da61cfe6">Configuration</a></div><div class="toclevel1" data-toclevel="1" data-childrenloaded="true"><a class="tocExpanded" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/de6ca2b7-82fe-4941-b899-e46d90a2eb27.htm" title="Web Service Conectivity" tocid="de6ca2b7-82fe-4941-b899-e46d90a2eb27">Web Service Conectivity</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/372debd4-ee98-4036-839f-8f98112d0a2a.htm" title="Service Installation" tocid="372debd4-ee98-4036-839f-8f98112d0a2a">Service Installation</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/3bddf5c3-5d5a-4569-85db-fcdc52a1b34a.htm" title="Service Description" tocid="3bddf5c3-5d5a-4569-85db-fcdc52a1b34a">Service Description</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/1a2d8dae-5e3d-404d-b25b-7b93a9cfcfea.htm" title="Service Debugging" tocid="1a2d8dae-5e3d-404d-b25b-7b93a9cfcfea">Service Debugging</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/b447d5c6-1b3b-4840-abfb-318b650ecc65.htm" title="ItemDescriber" tocid="b447d5c6-1b3b-4840-abfb-318b650ecc65">ItemDescriber</a></div><div class="toclevel2 current" data-toclevel="2"><a data-tochassubtree="false" href="../html/ffd0271b-d16b-45d2-b3b4-264ee4554607.htm" title="Buffered Queues Interface" tocid="ffd0271b-d16b-45d2-b3b4-264ee4554607">Buffered Queues Interface</a></div></div><div id="tocResizableEW" onmousedown="OnMouseDown(event);"></div><div id="TocResize" class="tocResize"><img id="ResizeImageIncrease" src="../icons/TocOpen.gif" onclick="OnIncreaseToc()" alt="Click or drag to resize" title="Click or drag to resize" /><img id="ResizeImageReset" src="../icons/TocClose.gif" style="display:none" onclick="OnResetToc()" alt="Click or drag to resize" title="Click or drag to resize" /></div></div><div class="topicContent" id="TopicContent"><table class="titleTable"><tr><td class="titleColumn"><h1>Buffered Queues Interface</h1></td></tr></table><span class="introStyle"><A href="http://www.commsvr.com/tabid/55/language/en-US/Default.aspx" title="CommServer online help" target="_blank">Home</A></span> <div class="collapsibleAreaRegion" id="BufferedQueuesInterface"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID0RB')" onkeypress="SectionExpandCollapse_CheckKey('ID0RB', event)" tabindex="0"><img id="ID0RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Buffered queues interface</span></div><div id="ID0RBSection" class="collapsibleSection"><p>Access to the data queues in DataPorter provides buffering of values that are read from OPC Server. This assures that none of the values are lost during the reading process.</p><p>To configure a transaction that uses buffering, the Buffered Access Queue operation should be used (this operation block is named "Buffer"). The name of the queue (that will be used by the client to connect) is configured as an Operation parameter (see figure below, where the queue name is configured as “Queue 1”).</p><div class="mediaCenter"><img alt="Queue Interface" src="../media/QueueInterface.jpg" /><div class="caption"><span class="captionLead">Figure 1:
						</span>Queue Interface</div></div><p>The figure below shows the sequence of actions performed during the process of buffered read by the sample client application.</p><div class="mediaCenter"><img alt="Buffered Read Example Sequence" src="../media/BufferedReadExampleSequence.jpg" /><div class="caption"><span class="captionLead">Figure 2:
						</span>Buffered read example sequence</div></div><p>In the figure above, the following steps are done:</p><ol><li><p>Listing of available queues:</p><ul><li><p>Client gets available queues (GetAvaliableQueues),</p></li><li><p>DataPorter returns the list of available queues (string[] Avaliable Queues),</p></li></ul></li><li><p>Connection to the queue:</p><ul><li><p>Client connects to queue using the queue name (ConnectToQueue (parameter name as a string)).</p></li><li><p>Server (OPCAdvancedDataAccess service) responds with a queue identifier (QueueHashID as a string).</p></li></ul></li><li><p>Transaction:</p><ul><li><p>Client requests data by sending StartTransaction (parameter QueueHashID as a string); this informs the OPCAdvancedDataAccess service to begin data transfer.</p></li><li><p>OPCAdvancedDataAccess sends all tags from queue as an array of ItemValueResult.</p></li><li><p>The queue is blocked while the client processes the data.  If an error occurs, the client can return to the previous point (Start transaction) and receives the same data again.</p></li><li><p>If no error occurs during data processing the client sends End transaction (function EndTransaction (parameter QueueHashID as a string)) – this is information for OPCAdvancedDataAccess that data processing has been finished. Thereafter OPCAdvancedDataAccess and DataPorter delete processed data, new data (if any) is put from the temporary queue to the main queue.</p></li></ul></li><li><p>The client waits some time and returns to Start transaction (step 3).</p></li></ol></div></div></div><div id="pageFooter" class="pageFooter">This documentation is designed to be used with CAS CommServer (this software is available at <A href="http://www.commsvr.com/index.php/products" title="CommServer -multiprotocol, multichannel, redundant communication server – software installation.">http://www.commsvr.com</A>).<p><a href="http://www.commsvr.com/" target="_blank">Copyright (c) 2019 Mariusz Postol</a></p><div class="feedbackLink">Send comments on this topic to
        <a id="HT_MailLink" href="mailto:techsupp%40cas.eu?Subject=CommServer">CAS</a></div>
        <script type="text/javascript">
        var HT_mailLink = document.getElementById("HT_MailLink");
        var HT_mailLinkText = HT_mailLink.innerHTML;
        HT_mailLink.href += ": " + document.title + "\u0026body=" + encodeURIComponent("Your feedback is used to improve the documentation and the product. Your e-mail address will not be used for any other purpose and is disposed of after the issue you report is resolved. While working to resolve the issue that you report, you may be contacted via e-mail to get further details or clarification on the feedback you sent. After the issue you report has been addressed, you may receive an e-mail to let you know that your feedback has been addressed.");
        HT_mailLink.innerHTML = HT_mailLinkText;
        </script></div></body></html>